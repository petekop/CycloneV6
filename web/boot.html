<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Cyclone Boot</title>
  <style>
    body { font-family: system-ui, Segoe UI, Arial; margin: 32px; }
    .bar { width: 100%; height: 18px; background:#eee; border-radius:9px; overflow:hidden; }
    .fill{ height:100%; width:0%; background:#4caf50; transition: width .3s ease; }
    .row { margin: 14px 0; }
    .msg { font-weight: 600; }
  </style>
</head>
<body>
  <h2>Booting Cyclone…</h2>
  <div class="row"><div class="bar"><div id="fill" class="fill"></div></div></div>
  <div class="row"><span id="pct">0%</span> — <span id="text" class="msg">Starting…</span></div>
  <script>
    async function poll() {
      try {
        const r = await fetch("/status?ts="+Date.now());
        const j = await r.json();
        const pct = Math.floor((j.step / Math.max(j.total,1)) * 100);
        document.getElementById("fill").style.width = pct + "%";
        document.getElementById("pct").textContent = pct + "%";
        document.getElementById("text").textContent = j.message || "";
        if (j.done) location.href = "/index";
      } catch(e) {}
      setTimeout(poll, 500);
    }
    poll();
  </script>
</body>
</html>
